
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-FYHS50G6DL"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            
            gtag('config', 'G-FYHS50G6DL');
            
        </script>
    
    <title>From Anyting to Sphinx &#8212; 银色子弹</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxnotes-strike.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/center-title.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster-fix.css" />
    <link rel="stylesheet" type="text/css" href="../_static/ablog.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.2/css/all.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <script data-isso="https://comments.silverrainz.me:30500" src="https://comments.silverrainz.me:30500/js/embed.min.js"></script>
    <link rel="canonical" href="https://silverrainz.me/blog/migrate-to-sphinx.html" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" /> 
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
    <link rel="apple-touch-icon" href="../_static/logo.png" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="银色子弹"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <div class="section" id="from-anyting-to-sphinx">
<h1>From Anyting to Sphinx<a class="headerlink" href="#from-anyting-to-sphinx" title="永久链接至标题">¶</a></h1>
<blockquote>
<div><p><a class="reference internal" href="../about/me.html#friend-Me" title="SilverRainZ friend"><code class="xref any any-friend docutils literal notranslate"><span class="pre">&#64;SilverRainZ</span></code></a> （指我自己）在使用一个还未存在的自建笔记系统，
每次想写点东西都因为「无法解决依赖」而失败。 <a class="footnote-reference brackets" href="#id5" id="id1">1</a></p>
</div></blockquote>
<p>不知何时我养成了一种奇怪的癖好，想读一本有价值的书，没有合适工具记读书笔记，
所以不读。 想记录一些不成体系的知识，不知道如何组织分类这些碎片，所以不记。
想写一篇博客，文章里有一些交叉引用，不想用粗暴的 <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">href=xxx&gt;</span></code> ，所以不写。
因噎废食大概就是这样吧。</p>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#id3" id="id7">挑选标准</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id8">迁移</a></p>
<ul>
<li><p><a class="reference internal" href="#jekyll" id="id9">Jekyll</a></p></li>
<li><p><a class="reference internal" href="#read-the-docs" id="id10">Read The Docs</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id7">挑选标准</a><a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>我并非没有在找合适的记录工具，大学时用 OneNote，在我还热衷于成为一个黑客的时候，
我用 OneNotes 记下了几十篇 OllyDBG 的学习笔记。那时候云同步功能还不够好，
在一次误操作中丢失了笔记，从此成为软黑。</p>
<p>后来 Gitbook 流行起来，尝试用其管理笔记，奈何 Node.js 太慢而 Markdown 表达力太孱弱。
我还在 AUR 维护了 <a class="reference external" href="https://aur.archlinux.org/packages/nodejs-gitbook">nodejs-gitbook</a> ，它的打包非常恶心，提供了一个只许全局
安装的 <a class="reference external" href="https://aur.archlinux.org/packages/nodejs-gitbook-cli">nodejs-gitbook-cli</a> 作为安装器，而不允许用户单独安装 <a class="reference external" href="https://aur.archlinux.org/packages/nodejs-gitbook">nodejs-gitbook</a> 。
这让发行版的打包非常困难。</p>
<p>在漫长的寻找中地我形成了自己的挑选标准：</p>
<dl>
<dt>自由，开源</dt><dd><p>我不信任商业软件、共享软件：商业软件会倒闭，会改变定价，而共享软件随时面临
不再更新的窘境</p>
</dd>
<dt>少做多余的事（低复杂度）</dt><dd><p>是指这个项目除了做「记录」本身，为了它的目标，它还多做了哪些事情。
多做的事情可能有帐号体系，权限控制，甚至 APP 等，复杂度大意味着项目：</p>
<ul class="simple">
<li><p>实现和维护的难度会上升</p></li>
<li><p>自身的维护成本也会上升</p></li>
<li><p>迁移难度会上升：可能使用了非标准的协议（标准协议无法满足需求）</p></li>
</ul>
<p>打个不恰当的比喻，最简单的「网盘」只要 WebDAV Server + Client 即可，rclone
可以是 WebDAV server，任意的浏览器都能当 WebDAV Client。
更复杂的系统 OwnCloud、NextCloud 则实现了五花八门的功能，当然他们也对 end user
更友好。</p>
<p>少做多余的事情意味着项目组的目标更一致，维持运转所需资源能少，垮掉的可能性
更小。就算垮了，fork 一个项目也比 fork 十个项目愉快地多。</p>
</dd>
<dt>长寿</dt><dd><p>软件基金会往往比三五人形成的组织的更长寿，必要的时候他们可以雇人来开发。
而个人就完全是兴趣使然</p>
<p>当然自由软件的优点也在此，如果项目组垮掉，只要项目本身足够重要，总有有人能
站出来 fork 或者继续维护的，再不行就自己上。</p>
</dd>
<dt>使用纯文本</dt><dd><p>就编辑体验的一环来说，富文本往往绑定一个复杂的，羸弱（想想论坛编辑器）或者
难以预料的（想想 MS Word）的编辑器，这当然不能怪他们，富文本编辑真是是太难了。</p>
<p>纯文本给我一种踏实感：</p>
<ul class="simple">
<li><p>不会产生冗余代码 – 你写什么它就是什么</p></li>
<li><p>不限制编辑器 – 我可以继续用 (Neo)Vim</p></li>
<li><p>容易自动化地修改 – sed 也是编辑器呀</p></li>
</ul>
</dd>
<dt>让别人做多余的事（可扩展）</dt><dd><p>这里的可扩展不止是工具本身提供了扩展机制，而是 <strong>工具在设计上留下了别人来填补的位置</strong> 。
可能说得有点绕，比如在这个项目里，我们选用 HTML 来表示富文本，但自己却不开发编辑器如何？
让用户去用别人写的编辑器。这在商业上当然不是一个好的策略（所以我们不用商业
软件 <code class="docutils literal notranslate"><span class="pre">:)</span></code> ），就算不是商业软件，这么做其实也降低了用户的粘性（但不考虑这
个的开源软件可不少啊 <code class="docutils literal notranslate"><span class="pre">:)</span></code> ）</p>
<p>但对我来说呢？我看到项目组因此节省了资源，我获得了自由更换编辑器的权利，
对于我的整个笔记系统而言，我将 <strong>复杂度分摊到了不同的项目身上</strong> ，在未来
某一个项目跑路的时候，我只需要寻找它那一部分的替代品就好了。</p>
</dd>
</dl>
<p>2017 年我用 <a class="reference internal" href="use-sphinx-and-rst-to-manage-your-notes.html"><span class="doc">Sphinx 管理我的笔记</span></a> ，
reStructuredText 很接近我心中理想的 markup language 的样子，结果刚建起一个框架便开始荒废。
从那时到现在已经过去了四年，我记录下了些什么呢？</p>
<blockquote>
<div><p><strong>「什么都没有」</strong></p>
</div></blockquote>
<p>2020 年，3、4 月的时候我尝试用 Golang 从零开始写一个笔记软件，后来发现无论是设计和工作量都
不是我能够胜任的，最后只留下一个零零落落的仓库。</p>
<p>5 月，我建立了 <a class="reference external" href="https://github.com/SilverRainZ/bullet">SilverRainZ/bullet</a> 仓库准备再试试 Sphinx，
之后学画需要记 <a class="reference internal" href="../notes/zxsys/index.html"><span class="doc">大量的笔记</span></a>，将他们电子化也是一个强大的驱动力。</p>
<p>9 月的时候生病，居然也因祸得福，捡到了几个月的疗养时间。
在家的时候里我好好学习了一下 Sphinx 和 Docutils，思考各种类型的文档要如何组织，
尝试使用社区提供的 <a class="reference external" href="https://github.com/各种扩展 &lt;sphinx-contrib&gt;`来增强文档的功能， 可惜其中不少扩展已经年久失修。再后来自己也建立了一个一人组织 :github:`sphinx-notes">&#64;各种扩展 &lt;sphinx-contrib&gt;`来增强文档的功能，
可惜其中不少扩展已经年久失修。再后来自己也建立了一个一人组织 :github:`sphinx-notes</a> ，
用来存放自己写的扩展，顺便回馈社区。</p>
<p>随着对 Sphinx+reStructuredText 实践的增多和一些扩展的完成，我的笔记终于慢慢成形了。</p>
<ul class="simple">
<li><p>按体裁对内容进行分类，分为 博客、笔记、随记、手册、收藏等几类，
避免了不知道记在哪里的困境 。</p></li>
<li><p>用 <a class="reference external" href="https://github.com/sphinx-notes/lilypond">sphinx-notes/lilypond</a> 来保存 <a class="reference internal" href="../collections/scores/index.html"><span class="doc">谱子</span></a></p></li>
<li><p>用 <a class="reference external" href="https://github.com/sphinx-notes/any">sphinx-notes/any</a> 来结构化地记录 <span class="xref std std-doc">友链</span> 和 <code class="code docutils literal notranslate"><span class="pre">doc:`读书笔记</span> <span class="pre">&lt;/notes/books/index&gt;</span></code>
等</p></li>
<li><p>用 <a class="reference external" href="https://github.com/executablebooks/sphinx-panels">executablebooks/sphinx-panels</a> 为首页分栏，顺便还享用了它内置的
<span class="fa fa-font-awesome"></span> 支持</p></li>
</ul>
<p>博客是最难办的一件事情，不用插件就不像博客，
写个插件工作量又巨大，好在这件事情已经有人做了，并且做得非常舒服，完全符合我的想象：
sunpy 社区写了一个叫 <a class="reference external" href="https://ablog.readthedocs.io">ablog</a> 的扩展，归类、
标签、归档、RSS 应有尽有，开发也非常活跃。</p>
<p>很棒的一点是 Sphinx 的 sidebar 并不是全局的，可以用 glob pattern 让不同的页面用不同的
sidebar，ABlog 引入的博客侧边栏并不会影响现有的其他的文档。对于特别的不需要侧边栏的页面，
比如 <a class="reference internal" href="../about/resume.html"><span class="doc">简历</span></a> ，可以定义一个空白的侧边栏。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">html_sidebars</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Match all blog pages</span>
    <span class="s1">&#39;blog/*&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;about.html&#39;</span><span class="p">,</span> <span class="s1">&#39;postcard.html&#39;</span><span class="p">,</span> <span class="s1">&#39;recentposts.html&#39;</span><span class="p">,</span>
               <span class="s1">&#39;tagcloud.html&#39;</span><span class="p">,</span> <span class="s1">&#39;categories.html&#39;</span><span class="p">,</span> <span class="s1">&#39;archives.html&#39;</span><span class="p">],</span>
    <span class="c1"># Match all pages but excluding blog</span>
    <span class="s1">&#39;*[!blog]*&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;about.html&#39;</span><span class="p">,</span> <span class="s1">&#39;navigation.html&#39;</span><span class="p">,</span> <span class="s1">&#39;relations.html&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;searchbox.html&#39;</span><span class="p">,</span> <span class="s1">&#39;donate.html&#39;</span><span class="p">],</span>
    <span class="c1"># Clean all sidebar for resume page</span>
    <span class="s1">&#39;about/resume&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;empty.html&#39;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>比较遗憾的是，正在使用的 sphinx_rtd_theme 并不听 Sphinx 的 sidebar 配置，
因此还是换到了默认的 Alabaster。</p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id8">迁移</a><a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<div class="section" id="jekyll">
<h3><a class="toc-backref" href="#id9">Jekyll</a><a class="headerlink" href="#jekyll" title="永久链接至标题">¶</a></h3>
<p>之前在 Jekyll 的文章并没有很大的价值，但本着不做 breaking change 的原则，
还是迁移过去了：</p>
<p>使用 m2r 将 markdown 转为 rst，用 awk 将 Jekyll 的 metadata</p>
<p>最重要的，新的博客地址是 <a class="reference external" href="https://silverrainz.me/blog/">https://silverrainz.me/blog/</a> , tech.silverrainz.me 之后会
redirect 到新地址。</p>
</div>
<div class="section" id="read-the-docs">
<h3><a class="toc-backref" href="#id10">Read The Docs</a><a class="headerlink" href="#read-the-docs" title="永久链接至标题">¶</a></h3>
<p>近半年发生了非常大的事情，死去又活来，居然也因祸得福，捡到了几个月的疗养时间。
在这段时间里我慢慢把自己理想中的笔记系统架设起来。</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>和 <a class="reference internal" href="../about/friends.html#friend-VOID001" title="VOID001 friend"><code class="xref any any-friend docutils literal notranslate"><span class="pre">&#64;VOID001</span></code></a> 的 <a class="reference external" href="https://void-shana.moe/linux/zh-taking-notes-with-vim.html#comment-530">对话节选</a></p>
</dd>
</dl>
<hr class="docutils" />
<section data-isso-id="/blog/migrate-to-sphinx" id="isso-thread"></section></div>
</div>
</div>

<div class="section">
       
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Yes silver bullet here.</p>






  
<h2>
   <i
    class="fa fa-pencil"
  ></i
  >  Draft  
</h2>

<ul>
   
<li id="author">
  <span
    ><i class="fa-fw fa fa-user"></i></span
  >
   
  <a href="author/shengyu-zhang.html">Shengyu Zhang</a>  
</li>
  
<li id="language">
  <span
    ><i class="fa-fw fa fa-language"></i></span
  >
   
  <a href="language/chinese.html">Chinese</a>  
</li>
  
<li id="tags">
  <span
    ><i
      class="fa-fw fa fa-tag"
    ></i
    ></span
  >
   Draft 
</li>
 
</ul>

<h3>
  <a href="../blog.html">Recent Posts</a>
</h3>
<ul>
   
  <li>
    <a href="new-boy.html"
      >21 March - 嘿，我去 2010</a
    >
  </li>
  
  <li>
    <a href="srain-and-me.html"
      >29 February - Srain 1.0 发布了</a
    >
  </li>
  
  <li>
    <a href="switch-from-duoshuo-to-isso.html"
      >10 June - 从多说迁移到 Isso</a
    >
  </li>
  
  <li>
    <a href="use-sphinx-and-rst-to-manage-your-notes.html"
      >29 March - 用 Sphinx + reStructuredText 构建笔记系统</a
    >
  </li>
  
  <li>
    <a href="gsoc-2016-sum-up.html"
      >29 September - GSoC 2016 小记 - 误打误撞三个月</a
    >
  </li>
  
</ul>

<h3><a href="tag.html">Tags</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-2">
    <a href="tag/c.html">C</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-3">
    <a href="tag/ctf.html">CTF</a>
  </li>
      
  <li class="ablog-cloud ablog-cloud-2">
    <a href="tag/gsoc.html">GSoC</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/gtk.html">GTK</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="tag/haskell.html">Haskell</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/irc.html">IRC</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/isso.html">Isso</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-2">
    <a href="tag/linux.html">Linux</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/makefile.html">Makefile</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-2">
    <a href="tag/os.html">OS</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/python.html">Python</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-3">
    <a href="tag/reverse.html">Reverse</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/sphinx.html">Sphinx</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/srain.html">Srain</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/teeworlds.html">Teeworlds</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/vim.html">Vim</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/windows.html">Windows</a>
  </li>
      
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/restructuredtext.html">reStructuredText</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/%E5%A4%9A%E8%AF%B4.html">多说</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/%E7%94%9F%E6%B4%BB.html">生活</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/%E7%9E%8E%E6%89%AF.html">瞎扯</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/%E8%AE%BE%E5%A4%87.html">设备</a>
  </li>
   
</ul>

<h3>
  <a href="archive.html">Archives</a>
</h3>
<ul>
   
  <li>
    <a href="2021.html">2021 (1)</a>
  </li>
    
  <li>
    <a href="2020.html">2020 (1)</a>
  </li>
    
  <li>
    <a href="2017.html">2017 (2)</a>
  </li>
    
  <li>
    <a href="2016.html">2016 (6)</a>
  </li>
    
  <li>
    <a href="2015.html">2015 (18)</a>
  </li>
   
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020-2021, Shengyu Zhang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>